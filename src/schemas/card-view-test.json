{
    "$schema": "./base-view-definition.schema.json",
    "type": "cards",
    "name": "translations-grid",
    "labelKey": "translations",
    "brick": "core",
    "showLogs": true,
    "version": "1.0.0",
    "entity": {
        "name": "MetaTranslation",
        "labelKey": "translation",
        "recordNameTemplate": "Key: ${key}, Lang: ${languageCode}, Group: ${group}"
    },
    "definition": {
        "fields": [
            {
                "name": "key",
                "labelKey": "key",
                "layout": {
                    "isTitle": true
                }
            },
            {
                "name": "languageCode",
                "labelKey": "language-code",
                "layout": {
                    "line": 1,
                    "filling": ["left"]
                }
            },
            {
                "name": "value",
                "labelKey": "translation",
                "layout": {
                    "line": 2,
                    "filling": ["left", "middle", "right"],
                    "hideLabel": true,
                    "isBold": true,
                    "isDetail": true
                }
            },
            {
                "name": "group",
                "labelKey": "group",
                "layout": {
                    "line": 1,
                    "filling": ["middle"],
                    "align": "center",
                    "isChip": true
                }
            },
            {
                "name": "isTemplate",
                "labelKey": "template",
                "type": "boolean",
                "layout": {
                    "line": 1,
                    "filling": ["right"],
                    "align": "right"
                }
            },
            {
                "name": "deletedOn",
                "isArchiveFlag": true,
                "disableSort": true
            }
        ],
        "sorts": [
            {
                "field": "key"
            }
        ],
        "alternativeViews": [
            {
                "name": "translations-grid",
                "type": "grid"
            }
        ],
        "highlighters": [
            {
                "expression": "group == 'login'",
                "border": {
                    "color": "teal lighten-4",
                    "sides": ["left"]
                },
                "title": {
                    "color": "teal"
                },
                "icon": {
                    "color": "teal",
                    "name": "mdi-card-text"
                }
            },
            {
                "expression": "deletedOn",
                "border": {
                    "color": "error lighten-4",
                    "sides": ["left"]
                },
                "title": {
                    "color": "error"
                }
            }
        ],
        "options": {
            "enableRecordNameAsSubTitle": true
        },
        "actions": {
            "open": {
                "view": "translations-form",
                "enableDoubleClick": false,
                "enableItemButton": true
            },
            "edit": {
                "view": "translations-form",
                "enableDoubleClick": true,
                "enableItemButton": true
            },
            "add": {
                "view": "translations-form",
                "enableToolbarButton": true,
                "enableFloatingButton": true,
                "enableMenuLink": true
            },
            "delete": {
                "enableToolbarButton": true,
                "enableItemButton": true,
                "enableMenuLink": true
            },
            "archive": {
                "enableToolbarButton": true,
                "enableItemButton": true,
                "enableMenuLink": true
            },
            "restore": {
                "enableToolbarButton": true,
                "enableItemButton": true,
                "enableMenuLink": true
            },
            "refresh": {
                "enableToolbarButton": true,
                "enableMenuLink": true
            },
            "archivedFilter": {
                "enableToolbarButton": true
            },
            "search": {
                "enableToolbarButton": true,
                "fields": ["key", "value"]
            },
            "filter": {
                "enableHeader": true,
                "enableDialog": true,
                "fields": [
                    {
                        "field": "key",
                        "type": "string"
                    },
                    {
                        "field": "languageCode",
                        "type": "list",
                        "listOptions": {
                            "enableMultiSelection": true,
                            "values": [
                                {
                                    "labelKey": "italian",
                                    "value": "it"
                                },
                                {
                                    "labelKey": "english",
                                    "value": "en"
                                },
                                {
                                    "labelKey": "french",
                                    "value": "fr"
                                },
                                {
                                    "labelKey": "spanish",
                                    "value": "es"
                                }
                            ]
                        }
                    },
                    {
                        "field": "group",
                        "type": "list",
                        "listOptions": {
                            "enableMultiSelection": true,
                            "query": {
                                "brick": "core",
                                "entity": "MetaTranslationGroup",
                                "valueFieldName": "group",
                                "textFieldName": "group",
                                "searchFields": ["group"],
                                "sorts": [
                                    {
                                        "field": "group",
                                        "direction": "DESC"
                                    }
                                ]
                            }
                        }
                    }
                ]
            }
        },
        "aggregators": [
            {
                "expression": "COUNT($self.id)",
                "labelKey": "all"
            },
            {
                "expression": "COUNT($self.id)",
                "labelKey": "template",
                "color": "success",
                "filters": [
                    {
                        "expressions": ["$self.isTemplate = :istemplate"],
                        "expressionValues": { "istemplate": true }
                    }
                ]
            }
        ]
    }
}
